<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/">
<head>
<meta charset="UTF-8">
<title>ProFit</title>
<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
<link rel="stylesheet"
	th:href="@{/css/model.css}">
<style>
.userPicture{
	width: 100px;
    height: 100px;

	img {
  	vertical-align: middle;
  	border-radius: 50%;
  	padding: 50px;
    width: 100%;
    height: 100%;
    /* 控制元素為內容大小 調整比例*/
    object-fit: cover;
    box-sizing: content-box; /* 將box-sizing設置為content-box以避免被覆蓋 */
	}
}
</style>	
</head>
<body>
	<!-- 頂列區域 -->
	<header>
		<h1>ProFit</h1>
		<div class="user-info">
			<p>${sessionScope.user_email}</p>
			<p>歡迎使用 ProFit！</p>
			<a style="text-decoration: none;" class="loginStatus"
				href="${pageContext.request.contextPath}/Logout">
				<button class="logout">登出</button>
			</a>
		</div>
	</header>

	<!-- 左側邊欄 -->
	<nav class="modelbar">
			<div class="userPicture">
				<img
					src="${pageContext.request.contextPath}/usersVIEW/userupload/${sessionScope.user_pictureURL}"
					alt="Profile Image"/>
			</div>
			<br>
			<br>
			<br>
		<ul>
			<li><a th:href="@{/GetAlluser}">會員管理</a></li>
			<li><a href="/ProFit/jobsVIEW/jobsList.jsp">職缺管理</a></li>
			<li><a href="/ProFit/servicesVIEW/Entry.jsp">技能服務管理</a></li>
			<li><a th:href="@{/courses}">課程管理</a></li>
			<li><a th:href="@{/events}">活動管理</a></li>
			<li><a href="/ProFit/transactionVIEW/transactions.jsp">交易管理</a></li>
		</ul>
	</nav>
	<script>
	    document.addEventListener("DOMContentLoaded", function() {
	        let userPictureImg = document.querySelector(".userPicture img");
	        let user_pictureURL = "${sessionScope.user_pictureURL}";
	        if (!user_pictureURL) {
	            userPictureImg.src = "https://firebasestorage.googleapis.com/v0/b/profit-e686b.appspot.com/o/userUpload%2Fdefault_user_picture.png?alt=media&token=dd3a8cfa-1a00-48ac-ba30-1f7bb3d783bd";
	        } else {
	            userPictureImg.src = "${sessionScope.user_pictureURL}";
	        }

	        let logoutButton = document.querySelector(".logout");
	        let user_email = "${sessionScope.user_email}";
	        if (!user_email) {
	            logoutButton.textContent = "登入";
	        } else {
	            logoutButton.textContent = "登出";
	        }

	        let login_status = logoutButton.textContent;
	        if (login_status === "登入") {
	            document.querySelector(".loginStatus").href = "${pageContext.request.contextPath}/usersVIEW/Login.jsp";
	        }
	    });

	</script>
	<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/js/jquery-3.7.1.min.js}"></script>
    <script th:src="@{/js/axios.min.js}"></script>
</body>
</html>